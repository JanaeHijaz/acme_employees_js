<html>
    <head>

    </head>
    <body>
        <script>
            const employees = [
  { id: 1, name: 'moe'},
  { id: 2, name: 'larry', managerId: 1},
  { id: 4, name: 'shep', managerId: 2},
  { id: 3, name: 'curly', managerId: 1},
  { id: 5, name: 'groucho', managerId: 3},
  { id: 6, name: 'harpo', managerId: 5},
  { id: 8, name: 'shep Jr.', managerId: 4},
  { id: 99, name: 'lucy', managerId: 1}
];

const spacer = (text)=> {
  if(!text){
    return console.log('');
  }
  const stars = new Array(5).fill('*').join('');
  console.log(`${stars} ${text} ${stars}`);
}

spacer('findEmployeeByName Moe')
// given a name and array of employees, return employee
function findEmployeeByName (name, array){
    
    const employee = array.find(employee => employee.name === name)
    return employee;
}
console.log(findEmployeeByName('moe', employees));//{ id: 1, name: 'moe' }
spacer('')

// -------------------------------------

spacer('findManagerFor Shep Jr.')
//given an employee and a list of employees, return the employee who is the manager
function findManagerFor (employee, array){
    // find the employee's object first
    // find the object who's id === managerID of the input employee name
  
    //console.log('employee:', employee, 'array:', array)
    //console.log(employee.managerId)
    
    return array.find(manager => manager.id === employee.managerId);
}
//console.log(findEmployeeByName('shep Jr.', employees));
console.log(findManagerFor(findEmployeeByName('shep Jr.', employees), employees));//{ id: 4, name: 'shep', managerId: 2 }
spacer('')


// -------------------------------------

spacer('findCoworkersFor Larry')
//given an employee and a list of employees, return the employees who report to the same manager
function findCoworkersFor (employee, array){
    //find the other employees who have the same managerId as the given employee
    
    //console.log('employee:', employee, 'array:', array)

    return array.filter(coworker => coworker.name !== employee.name && coworker.managerId === employee.managerId);
}
console.log(findCoworkersFor(findEmployeeByName('larry', employees), employees));/*
[ { id: 3, name: 'curly', managerId: 1 },
  { id: 99, name: 'lucy', managerId: 1 } ]
*/
spacer('');

// -------------------------------------

spacer('findManagementChain for moe')
//given an employee and a list of employees, return the management chain for that employee. The management chain starts from the employee with no manager with the passed in employees manager 

function findManagementChainForEmployee(employee, array){
    // starting from the given employee, find their manager, then continue up the chain (recursively) finding that manager's manager until you reach the top person with no manager (which will always be moe?)
    // find the given employee's manager (same as above) and return their object. then if that manager has a managerId, call the function again on that manager. 
    // this one should return an empty array (moe has no manager), so we should use something that returns an array (filter?). 
    //console.log('employee:', employee, 'array:', array)
    //console.log('this is their manager:', array.filter(manager => manager.id === employee.managerId));
    let managerChain = [];
    
    if (employee.managerId === undefined) {
        return managerChain;
    }
    else {
        const manager = array.filter(manager => manager.id === employee.managerId);
        managerChain.push(manager[0])
        employee = manager[0];
        return managerChain.concat(findManagementChainForEmployee(employee, array));
    }
}

console.log(findManagementChainForEmployee(findEmployeeByName('moe', employees), employees));//[  ]
spacer('');

// -------------------------------------

spacer('findManagementChain for shep Jr.')

console.log(findManagementChainForEmployee(findEmployeeByName('shep Jr.', employees), employees));/*
[ { id: 1, name: 'moe' },
  { id: 2, name: 'larry', managerId: 1 },
  { id: 4, name: 'shep', managerId: 2 }]
*/
spacer('');

// -------------------------------------

spacer('generateManagementTree')
//given a list of employees, generate a tree like structure for the employees, starting with the employee who has no manager. Each employee will have a reports property which is an array of the employees who report directly to them.
function generateManagementTree(array){

}
console.log(JSON.stringify(generateManagementTree(employees), null, 2));
/*
{
  "id": 1,
  "name": "moe",
  "reports": [
    {
      "id": 2,
      "name": "larry",
      "managerId": 1,
      "reports": [
        {
          "id": 4,
          "name": "shep",
          "managerId": 2,
          "reports": [
            {
              "id": 8,
              "name": "shep Jr.",
              "managerId": 4,
              "reports": []
            }
          ]
        }
      ]
    },
    {
      "id": 3,
      "name": "curly",
      "managerId": 1,
      "reports": [
        {
          "id": 5,
          "name": "groucho",
          "managerId": 3,
          "reports": [
            {
              "id": 6,
              "name": "harpo",
              "managerId": 5,
              "reports": []
            }
          ]
        }
      ]
    },
    {
      "id": 99,
      "name": "lucy",
      "managerId": 1,
      "reports": []
    }
  ]
}
*/
spacer('');

// -------------------------------------

spacer('displayManagementTree')
//given a tree of employees, generate a display which displays the hierarchy
function displayManagementTree(){
  
}
displayManagementTree(generateManagementTree(employees));/*
moe
-larry
--shep
---shep Jr.
-curly
--groucho
---harpo
-lucy
*/
        </script>
    </body>
</html>